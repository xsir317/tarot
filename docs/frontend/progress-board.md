# 前端开发进度看板

## 已完成 ✅

### 基础设施
- [x] Next.js 15 + TypeScript + Tailwind CSS 初始化
- [x] Vitest 测试框架配置
- [x] ESLint + Prettier 代码规范配置
- [x] 项目目录结构搭建

### 页面
- [x] 首页 (`/`) - 带导航到问题页
- [x] 问题输入页 (`/question`) - 表单验证和字符计数

### 组件
- [x] `TarotCard` - 翻牌动画组件
- [x] `QuotaIndicator` - 额度指示器组件

### 类型定义
- [x] `Card` 接口 - 塔罗牌数据结构
- [x] `CardPosition` 类型 - 牌位类型

### 测试
- [x] 13 个单元测试全部通过
- [x] 遵循 TDD 红绿重构流程

---

## 进行中 🔄

暂无

---

## 待办 📋

### 页面（优先级：高）
- [ ] 洗牌动画页 (`/shuffling`)
  - 多张牌快速移动、交换位置
  - 持续时间：2-3 秒
  - 动画完成后自动跳转到翻牌页

- [ ] 翻牌互动页 (`/reading`)
  - 显示 3 张已选中的塔罗牌
  - 用户依次点击翻牌
  - 每翻一张显示单张解读
  - 翻完 3 张后跳转到结果页

- [ ] 解读结果页 (`/result/:readingId`)
  - 显示 3 张牌的完整解读
  - 整体解读（基于 LLM 生成）
  - "再次占卜"按钮
  - 历史记录入口

### API 集成（优先级：高）
- [ ] 问题验证 API (`POST /api/tarot/validate-question`)
  - 调用后端验证问题是否适合占卜
  - 显示验证结果或错误提示

- [ ] 额度检查 API (`GET /api/quota`)
  - 获取用户剩余免费次数
  - 区分已登录/未登录用户

- [ ] 抽牌 API (`POST /api/tarot/draw`)
  - 随机抽取 3 张塔罗牌
  - 返回牌面信息和解读

### 状态管理（优先级：中）
- [ ] 使用 Zustand 创建全局状态 store
  - `useTarotStore` - 管理占卜流程状态
    - 用户问题
    - 选中的 3 张牌
    - 已翻牌状态
    - 解读结果
  - `useQuotaStore` - 管理额度状态
    - 剩余次数
    - 用户登录状态

### UI 组件（优先级：中）
- [ ] 通用按钮组件 (`Button`)
- [ ] 通用输入框组件 (`Input`)
- [ ] 通用文本域组件 (`Textarea`)
- [ ] 模态框组件 (`Modal`)
- [ ] 提示框组件 (`Toast`)
- [ ] 加载动画组件 (`Loading`)

### 用户中心（优先级：低）
- [ ] 注册页 (`/register`)
- [ ] 登录弹窗
- [ ] 用户中心页 (`/account`)
  - 历史记录列表
  - 账户信息
  - 订阅管理

### 支付相关（优先级：低）
- [ ] 付费页面 (`/payment`)
  - 单次购买选项
  - 包月订阅选项
  - Stripe 集成

### 国际化（优先级：中）
- [ ] 配置 next-intl
- [ ] 创建中英文语言包
- [ ] 切换语言功能

### 样式优化（优先级：低）
- [ ] 添加自定义主题变量
- [ ] 暗黑模式支持
- [ ] 响应式布局优化

---

## 技术债务

- [ ] 添加 E2E 测试（Playwright）
- [ ] 添加 API Mock 用于测试
- [ ] 优化打包体积
- [ ] 添加图片懒加载
- [ ] 添加错误边界（Error Boundary）

---

## 注释

- 所有新功能开发都应遵循 TDD 流程
- 提交前确保所有测试通过
- 提交消息遵循 Conventional Commits 规范
